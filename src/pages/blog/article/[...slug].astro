---
import { CollectionEntry, getCollection } from "astro:content";
import BlogPostLayout from "../../../layouts/BlogPostLayout.astro";
import PostBody from "@components/util/PostBody";
import lib from "zenn-markdown-html";

// build時にそのまま使うとエラーになるため変更
const markdownToHtml = lib.default ? lib.default : lib;

export async function getStaticPaths() {
  const posts = await getCollection("article");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

type Props = CollectionEntry<"article">;
const post = Astro.props;

post.body = markdownToHtml(post.body);
console.log(post.body);
---

<BlogPostLayout
  {...post.data}
  title={post.data.title}
  iconHeadline="yajium"
  desc="こんにちは"
>
  <PostBody content={post.body} />
  <a
    href="/blog/article"
    class="btn btn-error bg-error/95 pr-6 text-white font-medium fixed bottom-10 left-6 lg:left-10"
    >👈 back</a
  >
</BlogPostLayout>
