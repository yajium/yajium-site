---
import { CollectionEntry, getCollection } from "astro:content";
import BlogPostLayout from "../../../layouts/BlogPostLayout.astro";
import PostBody from "@components/util/PostBody";
import markdownToHtml from "zenn-markdown-html";

export async function getStaticPaths() {
  const posts = await getCollection("article");

  posts.forEach((p) => {
    p.body = markdownToHtml(p.body);
  });

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}
type Props = CollectionEntry<"article">;

const post = Astro.props;
---

<BlogPostLayout
  {...post.data}
  title={post.data.title}
  iconHeadline="yajium"
  desc="èˆˆå‘³æ•£æ¼«"
>
  <PostBody content={post.body} />
  <a
    href="/blog/article"
    class="btn btn-error bg-error/95 pr-6 text-white font-medium fixed bottom-10 left-6 lg:left-10"
    >ðŸ‘ˆ back</a
  >
</BlogPostLayout>
